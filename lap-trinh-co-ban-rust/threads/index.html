
<!DOCTYPE html>
<html>
<head>
    <title>Đa luồng (Threads) - RustVietnam</title>
    <meta charset="UTF-8"/>
	<link rel="profile" href="http://gmpg.org/xfn/11"/>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <meta http-equiv="Cache-control" content="public"/>
    <meta http-equiv="Cache-control" content="max-age=604800"/>
    <meta http-equiv="Cache-control" content="Content-Encoding=gzip"/>

    <link rel='icon' type='image/x-icon' href='https://rustvietnam.com/wp-content/themes/onda/images/favicon.svg' />
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet"/>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.7/js/min/perfect-scrollbar.jquery.min.js"></script>


    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet" />

	<meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />

	<!-- This site is optimized with the Yoast SEO plugin v17.1 - https://yoast.com/wordpress/plugins/seo/ -->
	<link rel="canonical" href="https://rustvietnam.com/lap-trinh-co-ban-rust/threads/" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Đa luồng (Threads) - RustVietnam" />
	<meta property="og:description" content="Multi Threads giúp ta tối đa hóa sức mạnh của máy tính và tốc độ thực thi của chương trình." />
	<meta property="og:url" content="https://rustvietnam.com/lap-trinh-co-ban-rust/threads/" />
	<meta property="og:site_name" content="RustVietnam" />
	<meta property="article:published_time" content="2021-09-13T16:16:02+00:00" />
	<meta property="article:modified_time" content="2021-09-15T08:16:10+00:00" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="admin" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="6 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{
	    "@context": "https://schema.org",
	    "@graph": [
	        {
	            "@type": "WebSite",
	            "@id": "https://localhost/rustvietnam/#website",
	            "url": "https://localhost/rustvietnam/",
	            "name": "RustVietnam",
	            "description": "Trang Web d\u00e0nh cho nh\u1eefng ng\u01b0\u1eddi b\u1ea1n y\u00eau th\u00edch l\u1eadp tr\u00ecnh ng\u00f4n ng\u1eef Rust",
	            "potentialAction": [
	                {
	                    "@type": "SearchAction",
	                    "target": {
	                        "@type": "EntryPoint",
	                        "urlTemplate": "https://localhost/rustvietnam/?s={search_term_string}"
	                    },
	                    "query-input": "required name=search_term_string"
	                }
	            ],
	            "inLanguage": "en-US"
	        },
	        {
	            "@type": "WebPage",
	            "@id": "https://rustvietnam.com/lap-trinh-co-ban-rust/threads/#webpage",
	            "url": "https://rustvietnam.com/lap-trinh-co-ban-rust/threads/",
	            "name": "\u0110a lu\u1ed3ng (Threads) - RustVietnam",
	            "isPartOf": {
	                "@id": "https://localhost/rustvietnam/#website"
	            },
	            "datePublished": "2021-09-13T16:16:02+00:00",
	            "dateModified": "2021-09-15T08:16:10+00:00",
	            "author": {
	                "@id": "https://localhost/rustvietnam/#/schema/person/e0d03b8f89a39fe8d8a990c7d2d9c655"
	            },
	            "breadcrumb": {
	                "@id": "https://rustvietnam.com/lap-trinh-co-ban-rust/threads/#breadcrumb"
	            },
	            "inLanguage": "en-US",
	            "potentialAction": [
	                {
	                    "@type": "ReadAction",
	                    "target": [
	                        "https://rustvietnam.com/lap-trinh-co-ban-rust/threads/"
	                    ]
	                }
	            ]
	        },
	        {
	            "@type": "BreadcrumbList",
	            "@id": "https://rustvietnam.com/lap-trinh-co-ban-rust/threads/#breadcrumb",
	            "itemListElement": [
	                {
	                    "@type": "ListItem",
	                    "position": 1,
	                    "name": "Home",
	                    "item": "https://localhost/rustvietnam/"
	                },
	                {
	                    "@type": "ListItem",
	                    "position": 2,
	                    "name": "\u0110a lu\u1ed3ng (Threads)"
	                }
	            ]
	        },
	        {
	            "@type": "Person",
	            "@id": "https://localhost/rustvietnam/#/schema/person/e0d03b8f89a39fe8d8a990c7d2d9c655",
	            "name": "admin",
	            "image": {
	                "@type": "ImageObject",
	                "@id": "https://localhost/rustvietnam/#personlogo",
	                "inLanguage": "en-US",
	                "url": "http://0.gravatar.com/avatar/f85eb7eaabe6640d9c988c04988fbaf0?s=96&d=mm&r=g",
	                "contentUrl": "http://0.gravatar.com/avatar/f85eb7eaabe6640d9c988c04988fbaf0?s=96&d=mm&r=g",
	                "caption": "admin"
	            },
	            "sameAs": [
	                "https://rustvietnam.com"
	            ],
	            "url": "https://rustvietnam.com/author/admin/"
	        }
	    ]
	}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="RustVietnam &raquo; Đa luồng (Threads) Comments Feed" href="https://rustvietnam.com/lap-trinh-co-ban-rust/threads/feed/" />
<link rel="https://api.w.org/" href="https://rustvietnam.com/wp-json/" /><link rel="alternate" type="application/json" href="https://rustvietnam.com/wp-json/wp/v2/posts/248" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://rustvietnam.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://rustvietnam.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.8.1" />
<link rel='shortlink' href='https://rustvietnam.com/?p=248' />
<link rel="alternate" type="application/json+oembed" href="https://rustvietnam.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Frustvietnam%2Flap-trinh-co-ban-rust%2Fthreads%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://rustvietnam.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Frustvietnam%2Flap-trinh-co-ban-rust%2Fthreads%2F&#038;format=xml" />
<link theme media="all" href="https://rustvietnam.com/wp-content/themes/onda/media/media_style.css" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://rustvietnam.com/wp-content/themes/onda/media/media_style.js" type="text/javascript"></script>
</head>

<body>
<!-- Navbar -->
<nav id="navbar-main" class="navbar navbar-main navbar-expand-lg bg-white navbar-light position-sticky top-0 shadow py-2">
    <div class="container">
        <a class="navbar-brand mr-lg-5" href="https://rustvietnam.com">
            <img src="https://rustvietnam.com/wp-content/themes/onda/images/logo.svg" width="60"/>
            <span>RustVietnam</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbar_global">
            <div class="navbar-collapse-header">
                <div class="row">
                    <div class="col-6 collapse-brand">
                        <a href="https://rustvietnam.com">
                            <img src="https://rustvietnam.com/wp-content/themes/onda/images/logo.svg" width="60"/>
                        </a>
                    </div>
                    <div class="col-6 collapse-close">
                        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                            <span></span>
                            <span></span>
                        </button>
                    </div>
                </div>
            </div>
            
            <ul class="navbar-nav navbar-nav-hover align-items-lg-center">
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" role="button">
                        <i class="ni ni-ui-04 d-lg-none"></i>
                        <span class="nav-link-inner--text">Nền tảng</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-xl">
                        <div class="dropdown-menu-inner">
                            <a href="https://rustvietnam.com/lap-trinh-co-ban-rust/cai-dat-rust/" class="media d-flex align-items-center">
                                <div class="icon icon-shape bg-gradient-primary rounded-circle text-white">
                                    <i class="ni ni-spaceship"></i>
                                </div>
                                <div class="media-body ml-3">
                                    <h6 class="heading text-primary mb-md-1">Bắt đầu</h6>
                                    <p class="description d-none d-md-inline-block mb-0">Cài đặt Rust</p>
                                </div>
                            </a>
                            <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-co-ban-rust/" class="media d-flex align-items-center">
                                <div class="icon icon-shape bg-gradient-success rounded-circle text-white">
                                    <i class="ni ni-palette"></i>
                                </div>
                                <div class="media-body ml-3">
                                    <h6 class="heading text-primary mb-md-1">Lập trình cơ bản</h6>
                                    <p class="description d-none d-md-inline-block mb-0">Các hướng dẫn cơ bản/cốt lõi nhất để có thể bắt đầu với Rust</p>
                                </div>
                            </a>
                            <a href="https://rustvietnam.com/chuong-trinh/thu-vien-chuan/" class="media d-flex align-items-center">
                                <div class="icon icon-shape bg-gradient-warning rounded-circle text-white">
                                    <i class="ni ni-ui-04"></i>
                                </div>
                                <div class="media-body ml-3">
                                    <h5 class="heading text-warning mb-md-1">Thư viện chuẩn</h5>
                                    <p class="description d-none d-md-inline-block mb-0">Các thư viện có sẵn vô cùng mạnh mẽ, phù hợp với tất cả các yêu cầu</p>
                                </div>

                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" role="button">
                        <i class="ni ni-collection d-lg-none"></i>
                        <span class="nav-link-inner--text">Nâng cao</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-ham/" class="dropdown-item">Lâp trình hàm</a>
                        <a href="https://rust-unofficial.github.io/patterns/" target="_blank" class="dropdown-item">Lập trình hướng đối tượng</a>
                        <a target="_blank" href="https://drive.google.com/file/d/1pz15PPdWCVk1JI-1xfhK6CjPWR7NWj_I/view?usp=sharing" class="dropdown-item">Lập trình hệ thống</a>
                        <a href="https://drive.google.com/file/d/1g6ZLNWUqBU1tBICRmLlr-rXqaUBRcDgB/view?usp=sharing" target="_blank" class="dropdown-item">Cấu trúc dữ liệu/thuật toán</a>
                    </div>
                </li>
            </ul>

            <ul class="navbar-nav navbar-nav-hover align-items-lg-center">

                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" role="button">
                        <i class="ni ni-collection d-lg-none"></i>
                        <span class="nav-link-inner--text">Network</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-web-voi-rust/" class="dropdown-item">Lập trình Web</a>
                        <a href="https://rustvietnam.com/chuong-trinh/webassembly/" class="dropdown-item">WebAssembly</a>
                    </div>
                </li>
                <li> <a target="_blank" rel="nofollow" href="https://docs.rust-embedded.org/book/#:~:text=Embedded%20Rust%20is%20for%20everyone%20who%20wants%20to,language%20provides.%20%28See%20also%20Who%20Rust%20Is%20For%29" class="nav-link" >
                        Lập trình nhúng
                    </a></li>
                <li> <a target="_blank" rel="nofollow" href="https://substrate.dev/en/tutorials" class="nav-link" >
                        BlockChain
                    </a></li>
            </ul>

            <ul class="navbar-nav align-items-lg-center ml-lg-auto">

                <li class="nav-item d-none d-lg-block">
                    <a href="mailto:hocrust@gmail.com" target="_blank" rel="nofollow" class="btn btn-primary btn-icon">
                        <span class="nav-link-inner--text">Liên hệ</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- End Navbar -->
    <div class="section section-hero section-shaped">
        <div class="shape shape-style-1 shape-primary">
            <span class="span-150"></span>
            <span class="span-50"></span>
            <span class="span-50"></span>
            <span class="span-75"></span>
            <span class="span-100"></span>
            <span class="span-75"></span>
            <span class="span-50"></span>
            <span class="span-100"></span>
            <span class="span-50"></span>
            <span class="span-100"></span>
        </div>
        <div class="page-header">
            <div class="container shape-container d-flex align-items-center py-lg">
                <div class="col px-0">
                    <div class="row align-items-center justify-content-center">
                        <div class="col-lg-8 text-center text-white">
                            <h1 class="display-2 text-white">Đa luồng (Threads)</h1>
                            <p class="lead">
                                <p>Multi Threads giúp ta tối đa hóa sức mạnh của máy tính và tốc độ thực thi của chương trình. </p>
                            </p>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="separator separator-bottom separator-skew zindex-100">
            <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon>
            </svg>
        </div>
    </div>

<section class="section">
    <div class="container">
        <div class="row justify-content-center flex-row-reverse">
            <div class="col-lg-4 single-sidebar">

                <h2><a class="text-danger" href="https://rustvietnam.com/chuong-trinh/lap-trinh-co-ban-rust/">Lâp trình cơ bản Rust</a></h2> <ul class="catlist" style="padding-left: 17px;"><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/cai-dat-rust/">Bài 1 - Cài Đặt Rust</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/hello-world-voi-rust/">Bài 2 - Hello World với Rust</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/hello-cargo/">Bài 3 - Hello, Cargo!</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/game-doan-so/">Bài 4 - Game đoán số</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/khai-bao-bien/">Bài 5 - Khai báo biến</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/khai-bao-dang-du-lieu-co-ban-cua-bien/">Bài 6 - Khai báo dạng dữ liệu cơ bản của biến</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/khai-bao-ham-closure/">Bài 7 - Khai báo hàm & closure</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/comments-trong-code/">Bài 8 - Comments trong code</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/dieu-kien-va-vong-lap/">Bài 9 - Điều kiện và vòng lặp</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/modules/">Bài 10 - Modules</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/struct-enum-traits/">Bài 11 - Enum - Struct  - Traits</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/ownership-va-borrowing/">Bài 12 - Ownership và Borrowing</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/macros-attributes/">Bài 13 - Macros và Attributes</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/generics/">Bài 14 - Generics</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/cargo-crates-io/">Bài 15 - Tìm hiểu thêm về Cargo và Crates.io</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/lam-viec-voi-command-line/">Bài 16 - Làm việc với Command Line</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/threads/">Bài 17 - Đa luồng (Threads)</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/rust-lifetime/">Bài 18 - Rust lifetime</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/lam-viec-voi-files/">Bài 19 - Làm việc với files</a></li><li><a href="https://rustvietnam.com/lap-trinh-co-ban-rust/testing/">Bài 20 - Testing</a></li></ul>
            </div>

            <div class="col-lg-8 single-content">
            <p>Máy tính này càng nhiều core, lập trình đa luồng( Multi Threads ) ngày càng quang trọng,Multi Threads giúp ta tối đa hóa sức mạnh của máy tính và tốc độ thực thi của chương trình.</p>
<h3>Tạo Threads với spawn</h3>
<pre><code class="language-html">use std::thread;
use std::time::Duration;
fn main() {
    thread::spawn(|| {
        for i in 1..10 {
            println!(&quot;hi number {} from the spawned thread!&quot;, i);
thread::sleep(Duration::from_millis(1));
        }
    });
    for i in 1..5 {
        println!(&quot;hi number {} from the main thread!&quot;, i);
thread::sleep(Duration::from_millis(1));
    }
}</code></pre>
<p><strong>use std::thread;</strong> thread lấy từ thư viện chuẩn std của Rust, hàm để tạo thread là <strong>thread::spawn</strong> , đầu vào của <strong>spawn</strong> là 1 closure nhé <strong>thread::spawn(|| { ...})</strong><br />
Kết quả chạy chương trình như sau</p>
<blockquote>
<p>hi number 1 from the main thread!<br />
hi number 1 from the spawned thread!<br />
hi number 2 from the main thread!<br />
hi number 2 from the spawned thread!<br />
hi number 3 from the main thread!<br />
hi number 3 from the spawned thread!<br />
hi number 4 from the main thread!<br />
hi number 4 from the spawned thread!</p>
</blockquote>
<p>Bên trong <strong>thread</strong> chúng ta đếm từ 1 đến 9 (1..10 tạo ra những số từ 1 đến 9 - <strong>kì cục</strong>), mỗi lần nghỉ 1ms <strong>thread::sleep(Duration::from_millis(1));</strong><br />
bên ngoài ở hàm main chúng ta đếm từ 1 đến 4 tương tự mỗi lần nghỉ 1ms<br />
Lần đầu hàm ở luồng chính là main sẽ chạy --&gt; in ra <strong>&quot;hi number 1 from the main thread!&quot;</strong><br />
lệnh <strong>thread::sleep </strong> thực thi cho phép luồng chính nghỉ và cho luồng khác chạy, tức là luồng bên trong <strong>thread::spawn</strong> chạy điều đó dẫn tới in ra <strong>&quot;hi number 1 from the spawned thread!&quot;</strong> và tiếp theo hàm <strong>thread::sleep</strong> để luồng này nghỉ đưa code quay về luồng chính main và cứ thế tiếp tục cho đến kết thúc , vậy câu hỏi là làm sao để code trong luồng <strong>thread::spawn</strong> vẫn có thể chạy hết mà ko đợi thời gian nghỉ từ luồn main, câu trả lời là hàm join</p>
<blockquote>
<p>handle.join().unwrap();</p>
</blockquote>
<p>Thêm vào cuối chương trình ta sẽ thấy sự khác biệt, code trong luồng <strong>thread::spawn</strong> đã thực thi hết.<br />
Nếu chúng ta không chèn cuối chương trình mà chèn giữa như vầy </p>
<pre><code class="language-html">use std::thread;
use std::time::Duration;
fn main() {
    let handle = thread::spawn(|| {
        for i in 1..10 {
            println!(&quot;hi number {} from the spawned thread!&quot;, i);
     thread::sleep(Duration::from_millis(1));
        }
    });
    handle.join().unwrap();
    for i in 1..5 {
        println!(&quot;hi number {} from the main thread!&quot;, i);
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre>
<p>Thì ta sẽ thấy code trong luồng <strong>thread::spawn</strong>  chạy hết rồi mới tới lượt luồng main thực thi.</p>
<h3>Sử dụng lệnh move</h3>
<p>Một lệnh thường xuyên dùng cho closure trong thread đó là <strong>move</strong> , <strong>move</strong> yêu cầu chuyển sỡ hữu biến vào bên trong closure</p>
<blockquote>
<p>let data = vec![1, 2, 3];<br />
let closure = move || println!(&quot;captured {:?} by value&quot;, data);<br />
println!(&quot;{:?}&quot;,data);</p>
</blockquote>
<p>Code trên sẽ báo lỗi vì data đã được chuyển vào bên trong closure --&gt; ko tồn tại cho bất kì lệnh nào kế tiếp.Nếu bỏ <strong>move</strong> đi thì code trên vẫn chạy, quay lại với <strong>thread</strong> chúng ta xem code sau </p>
<pre><code class="language-html">use std::thread;
fn main() {
    let v = vec![1, 2, 3];
    let handle = thread::spawn(|| {
        println!(&quot;Here&#039;s a vector: {:?}&quot;, v);
    });
    handle.join().unwrap();
}</code></pre>
<p>chúng ta thấy biến v trong luồng chính main nên khi thực hiên in ra ở luồng handle tạo bởi <strong>thread::spawn</strong> thì không được, code báo lỗi, vậy thì ta dùng <strong>move</strong> để đưa biến vào bên trong closure mà thực thi</p>
<pre><code class="language-html">use std::thread;
fn main() {
    let v = vec![1, 2, 3];
    let handle = thread::spawn(move || {
        println!(&quot;Here&#039;s a vector: {:?}&quot;, v);
    });
    handle.join().unwrap();
}</code></pre>
<p>--&gt; OK , game này dễ.</p>
<h2>Truyền nhận dữ liệu giữa các luồng</h2>
<p>Giống 2 chiếc xe đi trên 2 con đường, để liên lạc thì phải có kênh liên lạc nào đó , như phone hay radio chẳng hạn, việc truyền nhận dữ liệu giữa các luồng cần phải có các <strong>channel</strong></p>
<pre><code class="language-html">use std::sync::mpsc;
use std::thread;
fn main() {
    let (tx, rx) = mpsc::channel();
    thread::spawn(move || {
        let val = String::from(&quot;hi&quot;);
        tx.send(val).unwrap();
    });
    let received = rx.recv().unwrap();
    println!(&quot;Got: {}&quot;, received);
}</code></pre>
<p>Code trên chúng ta tạo 1 kênh bằng thư viện <strong>std::sync::mpsc</strong> với khai báo <strong>let (tx, rx) = mpsc::channel();</strong> ta có 2 biến <strong>tx</strong> : truyền , <strong>rx</strong> : nhận, <strong>tx</strong> được đưa vào bên trong <strong>thread::spawn</strong> với khai báo <strong>move</strong>, <strong>tx.send(val).unwrap();</strong> tx gửi giá trị <strong>val</strong> ra và ở luồng chính nhận dữ liệu <strong>let received = rx.recv().unwrap();</strong><br />
Nâng cao hơn ta gửi nhiều dữ liệu,mỗi lần chờ 1s</p>
<pre><code class="language-html">use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let vals = vec![
            String::from(&quot;hi&quot;),
            String::from(&quot;from&quot;),
            String::from(&quot;the&quot;),
            String::from(&quot;thread&quot;),
        ];

        for val in vals {
            tx.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    for received in rx {
        println!(&quot;Got: {}&quot;, received);
    }
}</code></pre>
<p>vậy nếu chúng ta có 2 luồng thì làm sao , ta sẽ clone tx , <strong>let tx1 = tx.clone();</strong> --&gt; 2 biến gửi và 1 biến nhận, thử code nhé</p>
<pre><code class="language-html">use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    // --snip--

    let (tx, rx) = mpsc::channel();

    let tx1 = tx.clone();
    thread::spawn(move || {
        let vals = vec![
            String::from(&quot;hi&quot;),
            String::from(&quot;from&quot;),
            String::from(&quot;the&quot;),
            String::from(&quot;thread&quot;),
        ];

        for val in vals {
            tx1.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    thread::spawn(move || {
        let vals = vec![
            String::from(&quot;more&quot;),
            String::from(&quot;messages&quot;),
            String::from(&quot;for&quot;),
            String::from(&quot;you&quot;),
        ];

        for val in vals {
            tx.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    for received in rx {
        println!(&quot;Got: {}&quot;, received);
    }

    // --snip--
}</code></pre>
             <hr/>
                <div class="powr-comments" id="e67d472b_248"></div><script src="https://www.powr.io/powr.js?platform=html"></script>
            </div>

        </div>
    </div>
</section>

<footer class="footer has-cards">
    <div class="container">

        <hr>
        <div class="row align-items-center justify-content-md-between">
            <div class="col-md-6">
                <div class="copyright">
                    © 2021 <a href="" target="_blank">Bản quyền thuộc về RustVietNam</a>.
                </div>
            </div>


        </div>
    </div>
</footer>
<style>
    .single-content img{
        max-width: 100%;
        height: auto;
    }
    .single-content blockquote{
        padding-left: 20px;
        border-left: 5px solid;
        font-size: 87.5%;
        color: #f3a4b5;
        word-break: break-word;
        font-family: system-ui;
    }
</style>
</body>
</html>
