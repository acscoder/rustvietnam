<!DOCTYPE html><html lang="vi"><head><title>Hiển thị trang Web trên trình duyệt - RustVietnam</title><meta charset="UTF-8"/><link rel="profile" href="http://gmpg.org/xfn/11"/><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Cache-control" content="public"/><meta http-equiv="Cache-control" content="max-age=604800"/><meta http-equiv="Cache-control" content="Content-Encoding=gzip"/><link rel='icon' type='image/x-icon' href='https://rustvietnam.com/wp-content/themes/onda/images/favicon.svg' /><link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet"/> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.7/js/min/perfect-scrollbar.jquery.min.js"></script> <link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet" /><meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' /><link rel="canonical" href="https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/" /><meta property="og:locale" content="en_US" /><meta property="og:type" content="article" /><meta property="og:title" content="Hiển thị trang Web trên trình duyệt - RustVietnam" /><meta property="og:description" content="Hiển thị nội dung trang web với HTML, JavaScript và CSS." /><meta property="og:url" content="https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/" /><meta property="og:site_name" content="RustVietnam" /><meta property="article:published_time" content="2021-09-07T11:04:52+00:00" /><meta property="article:modified_time" content="2021-09-15T09:11:34+00:00" /><meta property="og:image" content="https://rustvietnam.com/wp-content/uploads/2021/09/B16813_Figure_5.1.jpg" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:label1" content="Written by" /><meta name="twitter:data1" content="admin" /><meta name="twitter:label2" content="Est. reading time" /><meta name="twitter:data2" content="13 minutes" /> <script type="application/ld+json" class="yoast-schema-graph">{
	    "@context": "https://schema.org",
	    "@graph": [
	        {
	            "@type": "WebSite",
	            "@id": "https://rustvietnam.com/#website",
	            "url": "https://rustvietnam.com/",
	            "name": "RustVietnam",
	            "description": "Trang Web d\u00e0nh cho nh\u1eefng ng\u01b0\u1eddi b\u1ea1n y\u00eau th\u00edch l\u1eadp tr\u00ecnh ng\u00f4n ng\u1eef Rust. Ch\u00fang t\u00f4i kh\u00f4ng \u0111\u1ea1i di\u1ec7n hay c\u00f3 li\u00ean h\u1ec7 g\u00ec v\u1edbi team ch\u00ednh th\u1ee9c c\u1ee7a Rust ( rust-lang.org )",
	            "potentialAction": [
	                {
	                    "@type": "SearchAction",
	                    "target": {
	                        "@type": "EntryPoint",
	                        "urlTemplate": "https://rustvietnam.com/?s={search_term_string}"
	                    },
	                    "query-input": "required name=search_term_string"
	                }
	            ],
	            "inLanguage": "en-US"
	        },
	        {
	            "@type": "ImageObject",
	            "@id": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/#primaryimage",
	            "inLanguage": "en-US",
	            "url": "https://rustvietnam.com/wp-content/uploads/2021/09/B16813_Figure_5.1.jpg",
	            "contentUrl": "https://rustvietnam.com/wp-content/uploads/2021/09/B16813_Figure_5.1.jpg",
	            "width": 1579,
	            "height": 187
	        },
	        {
	            "@type": "WebPage",
	            "@id": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/#webpage",
	            "url": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/",
	            "name": "Hi\u1ec3n th\u1ecb trang Web tr\u00ean tr\u00ecnh duy\u1ec7t - RustVietnam",
	            "isPartOf": {
	                "@id": "https://rustvietnam.com/#website"
	            },
	            "primaryImageOfPage": {
	                "@id": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/#primaryimage"
	            },
	            "datePublished": "2021-09-07T11:04:52+00:00",
	            "dateModified": "2021-09-15T09:11:34+00:00",
	            "author": {
	                "@id": "https://rustvietnam.com/#/schema/person/e0d03b8f89a39fe8d8a990c7d2d9c655"
	            },
	            "breadcrumb": {
	                "@id": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/#breadcrumb"
	            },
	            "inLanguage": "en-US",
	            "potentialAction": [
	                {
	                    "@type": "ReadAction",
	                    "target": [
	                        "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/"
	                    ]
	                }
	            ]
	        },
	        {
	            "@type": "BreadcrumbList",
	            "@id": "https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/#breadcrumb",
	            "itemListElement": [
	                {
	                    "@type": "ListItem",
	                    "position": 1,
	                    "name": "Home",
	                    "item": "https://rustvietnam.com/"
	                },
	                {
	                    "@type": "ListItem",
	                    "position": 2,
	                    "name": "Hi\u1ec3n th\u1ecb trang Web tr\u00ean tr\u00ecnh duy\u1ec7t"
	                }
	            ]
	        },
	        {
	            "@type": "Person",
	            "@id": "https://rustvietnam.com/#/schema/person/e0d03b8f89a39fe8d8a990c7d2d9c655",
	            "name": "admin",
	            "image": {
	                "@type": "ImageObject",
	                "@id": "https://rustvietnam.com/#personlogo",
	                "inLanguage": "en-US",
	                "url": "http://0.gravatar.com/avatar/f85eb7eaabe6640d9c988c04988fbaf0?s=96&d=mm&r=g",
	                "contentUrl": "http://0.gravatar.com/avatar/f85eb7eaabe6640d9c988c04988fbaf0?s=96&d=mm&r=g",
	                "caption": "admin"
	            },
	            "sameAs": [
	                "https://rustvietnam.com"
	            ],
	            "url": "https://rustvietnam.com/author/admin/"
	        }
	    ]
	}</script> <link rel='dns-prefetch' href='//s.w.org' /><link rel="alternate" type="application/rss+xml" title="RustVietnam &raquo; Hiển thị trang Web trên trình duyệt Comments Feed" href="https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/feed/" /><link rel="https://api.w.org/" href="https://rustvietnam.com/wp-json/" /><link rel="alternate" type="application/json" href="https://rustvietnam.com/wp-json/wp/v2/posts/105" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://rustvietnam.com/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://rustvietnam.com/wp-includes/wlwmanifest.xml" /><meta name="generator" content="WordPress 5.8.1" /><link rel='shortlink' href='https://rustvietnam.com/?p=105' /><link rel="alternate" type="application/json+oembed" href="https://rustvietnam.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Frustvietnam%2Flap-trinh-web-voi-rust%2Fhien-thi-trang-web-tren-trinh-duyet%2F" /><link rel="alternate" type="text/xml+oembed" href="https://rustvietnam.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Frustvietnam%2Flap-trinh-web-voi-rust%2Fhien-thi-trang-web-tren-trinh-duyet%2F&#038;format=xml" /><link theme media="all" href="https://rustvietnam.com/wp-content/themes/onda/media/media_style.css" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://rustvietnam.com/wp-content/themes/onda/media/media_style.js" type="text/javascript"></script> </head><body><nav id="navbar-main" class="navbar navbar-main navbar-expand-lg bg-white navbar-light position-sticky top-0 shadow py-2"><div class="container"> <a class="navbar-brand mr-lg-5" href="https://rustvietnam.com"> <img src="https://rustvietnam.com/wp-content/themes/onda/images/logo.svg" width="60"/> <span>RustVietnam</span> </a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button><div class="navbar-collapse collapse" id="navbar_global"><div class="navbar-collapse-header"><div class="row"><div class="col-6 collapse-brand"> <a href="https://rustvietnam.com"> <img src="https://rustvietnam.com/wp-content/themes/onda/images/logo.svg" width="60"/> </a></div><div class="col-6 collapse-close"> <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation"> <span></span> <span></span> </button></div></div></div><ul class="navbar-nav navbar-nav-hover align-items-lg-center"><li class="nav-item dropdown"> <a class="nav-link" data-toggle="dropdown" role="button"> <i class="ni ni-ui-04 d-lg-none"></i> <span class="nav-link-inner--text">Nền tảng</span> </a><div class="dropdown-menu dropdown-menu-xl"><div class="dropdown-menu-inner"> <a href="https://rustvietnam.com/lap-trinh-co-ban-rust/cai-dat-rust/" class="media d-flex align-items-center"><div class="icon icon-shape bg-gradient-primary rounded-circle text-white"> <i class="ni ni-spaceship"></i></div><div class="media-body ml-3"><h6 class="heading text-primary mb-md-1">Bắt đầu</h6><p class="description d-none d-md-inline-block mb-0">Cài đặt Rust</p></div> </a> <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-co-ban-rust/" class="media d-flex align-items-center"><div class="icon icon-shape bg-gradient-success rounded-circle text-white"> <i class="ni ni-palette"></i></div><div class="media-body ml-3"><h6 class="heading text-primary mb-md-1">Lập trình cơ bản</h6><p class="description d-none d-md-inline-block mb-0">Các hướng dẫn cơ bản/cốt lõi nhất để có thể bắt đầu với Rust</p></div> </a> <a href="https://rustvietnam.com/chuong-trinh/thu-vien-chuan/" class="media d-flex align-items-center"><div class="icon icon-shape bg-gradient-warning rounded-circle text-white"> <i class="ni ni-ui-04"></i></div><div class="media-body ml-3"><h5 class="heading text-warning mb-md-1">Thư viện chuẩn</h5><p class="description d-none d-md-inline-block mb-0">Các thư viện có sẵn vô cùng mạnh mẽ, phù hợp với tất cả các yêu cầu</p></div></a></div></div></li><li class="nav-item dropdown"> <a class="nav-link" data-toggle="dropdown" role="button"> <i class="ni ni-collection d-lg-none"></i> <span class="nav-link-inner--text">Nâng cao</span> </a><div class="dropdown-menu"> <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-ham/" class="dropdown-item">Lâp trình hàm</a> <a href="https://rust-unofficial.github.io/patterns/" target="_blank" class="dropdown-item">Lập trình hướng đối tượng</a> <a target="_blank" href="https://drive.google.com/file/d/1pz15PPdWCVk1JI-1xfhK6CjPWR7NWj_I/view?usp=sharing" class="dropdown-item">Lập trình hệ thống</a> <a href="https://drive.google.com/file/d/1g6ZLNWUqBU1tBICRmLlr-rXqaUBRcDgB/view?usp=sharing" target="_blank" class="dropdown-item">Cấu trúc dữ liệu/thuật toán</a></div></li></ul><ul class="navbar-nav navbar-nav-hover align-items-lg-center"><li class="nav-item dropdown"> <a class="nav-link" data-toggle="dropdown" role="button"> <i class="ni ni-collection d-lg-none"></i> <span class="nav-link-inner--text">Network</span> </a><div class="dropdown-menu"> <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-web-voi-rust/" class="dropdown-item">Lập trình Web</a> <a href="https://rustvietnam.com/chuong-trinh/webassembly/" class="dropdown-item">WebAssembly</a></div></li><li> <a href="https://rustvietnam.com/chuong-trinh/lap-trinh-nhung" class="nav-link" > Lập trình nhúng </a></li><li> <a target="_blank" rel="nofollow" href="https://substrate.dev/en/tutorials" class="nav-link" > BlockChain </a></li></ul><ul class="navbar-nav align-items-lg-center ml-lg-auto"><li class="nav-item d-none d-lg-block"> <a href="https://rustvietnam.com/gioi-thieu/" class="btn btn-primary btn-icon"> <span class="nav-link-inner--text">Giới thiệu</span> </a></li></ul></div></div></nav><div class="section section-hero section-shaped"><div class="shape shape-style-1 shape-primary"> <span class="span-150"></span> <span class="span-50"></span> <span class="span-50"></span> <span class="span-75"></span> <span class="span-100"></span> <span class="span-75"></span> <span class="span-50"></span> <span class="span-100"></span> <span class="span-50"></span> <span class="span-100"></span></div><div class="page-header"><div class="container shape-container d-flex align-items-center py-lg"><div class="col px-0"><div class="row align-items-center justify-content-center"><div class="col-lg-8 text-center text-white"><h1 class="display-2 text-white">Hiển thị trang Web trên trình duyệt</h1><p class="lead"><p>Hiển thị nội dung trang web với HTML, JavaScript và CSS.</p></p></div></div></div></div></div><div class="separator separator-bottom separator-skew zindex-100"> <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg"> <polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon> </svg></div></div><section class="section"><div class="container"><div class="row justify-content-center flex-row-reverse"><div class="col-lg-4 single-sidebar"><h2><a class="text-danger" href="https://rustvietnam.com/chuong-trinh/lap-trinh-web-voi-rust/">Lập trình Web với Rust</a></h2><ul class="catlist" style="padding-left: 17px;"><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/chuong-1-huong-dan-co-ban-ve-lap-trinh-voi-rust/">Chương 1 - Hướng dẫn cơ bản về lập trình với Rust</a></li><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/chuong-2-thiet-ke-mot-web-app-voi-rust/">Chương 2 - Thiết kế một Web App với Rust</a></li><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/chuong-3-xu-li-http-requests-voi-actix-web-framework/">Chương 3 - Xử lí HTTP Requests với Actix Web framework</a></li><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/chuong-4-xu-li-du-lieu-http-requests-voi-actix-web-framework/">Chương 4  - Xử lí Dữ liệu HTTP Requests với Actix Web framework</a></li><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/hien-thi-trang-web-tren-trinh-duyet/">Chương 5 - Hiển thị trang Web trên trình duyệt</a></li><li><a href="https://rustvietnam.com/lap-trinh-web-voi-rust/co-so-du-lieu-postgresql/">Chương 6 - Cơ sở dữ liệu PostgreSQL</a></li></ul></div><div class="col-lg-8 single-content"><p>Chương này chúng ta sẽ cover 1 số vấn đề sau:</p><ul><li>Hiển thị HTML</li><li>Xử lí file HTML</li><li>Đưa JavaScript vào</li><li>Đưa CSS vào</li><li>Tạo CSS dùng chung cho nhiều view</li><li>Tạo các front-end components có thể dùng chung cho nhiều view</li></ul><h2>Hiển thị HTML</h2><p>Các chương trước chúng ta xài JSON , bây giờ là lúc render HTML ( nếu chưa biết về Html/js/css thì các bạn quay xe sớm nhé ).<br /> Trong src/views tạo folder <strong>app</strong> tạo <strong>items.rs</strong> và <strong>mod.rs</strong><br /> Trong file <strong>items.rs</strong></p><pre><code class="language-html">use actix_web::HttpResponse;
pub async fn items() -&gt; HttpResponse {
    HttpResponse::Ok()
        .content_type(&quot;text/html; charset=utf8&quot;).body(```&quot;&lt;h1&gt;Items&lt;/h1&gt;&quot;```)
}</code></pre><p>Một code đơn giản Trả về HTML body <code><code>**&lt;h1&gt;Items&lt;/h1&gt;** </code></code></p><p>Trong <strong>mod,rs</strong> ta khai báo factory cho view item ở trên, tương tự như những factory đã có trước đó</p><pre><code class="language-html">use actix_web::web;
mod items;
use super::path::Path;
pub fn app_factory(app: &amp;mut web::ServiceConfig) {
let base_path: Path = Path{prefix: String::from(&quot;/&quot;)}; app.route(&amp;base_path.define(String::from(&quot;&quot;)),web::get().to(items::items));
}</code></pre><p>Trong <strong>views/mod.rs</strong> ta thêm</p><blockquote><p>mod app;</p></blockquote><p>Trong <strong>views_factory</strong> ta gọi <strong>app_factory</strong></p><blockquote><p>app::app_factory(app);</p></blockquote><p>Chạy <strong>cargo run</strong> chúng ta sẽ có kết quả<br /> <img src="https://rustvietnam.com/wp-content/uploads/2021/09/B16813_Figure_5.1.jpg" alt="" /><br /> Ok , chúng ta đã có cái HTML đầu tiên của mình.Tiếp theo chúng ta xây dựng hàm để đọc nội dung file lấy HTML , tạo file <strong>views/app/content_loader.rs</strong></p><pre><code class="language-html">use std::fs;
pub fn read_file(file_path: &amp;str) -&gt; String {
    let data: String = fs::read_to_string(file_path).expect(&quot;Unable to read file&quot;);
    return data
}</code></pre><p>Trong folder <strong>src</strong> ta tạo folder <strong>templates</strong> để chứa tất cả các template html cảu mình, tạo 1 file <strong>main.html</strong></p><pre><code class="language-html">&lt;body&gt;
    &lt;h1&gt;To Do Items&lt;/h1&gt;
    &lt;input type=&quot;text&quot; id=&quot;name&quot; placeholder=&quot;create to do         item&quot;&gt;
    &lt;button id=&quot;create-button&quot; value=&quot;Send&quot;&gt;Create&lt;/button&gt;
&lt;/body&gt;
&lt;script&gt;
    let createButton = document.getElementById(        &quot;create-button&quot;);
    createButton.addEventListener(&quot;click&quot;, postAlert);
    function postAlert() {
        let titleInput = document.getElementById(&quot;name&quot;);
        alert(titleInput.value);
        titleInput.value = null;
    }
&lt;/script&gt;</code></pre><p>Chúng ta sẽ load file main.html với code</p><blockquote><p>use actix_web::HttpResponse;<br /> use super::content_loader::read_file;<br /> pub async fn items() -&gt; HttpResponse {<br /> let html_data = read_file(<br /> &quot;./templates/main.html&quot;);<br /> HttpResponse::Ok().content_type(&quot;text/html; charset=utf-8&quot;).body(html_data)<br /> }</p></blockquote><p><img src="https://rustvietnam.com/wp-content/uploads/2021/09/B16813_Figure_5.3.jpg" alt="" /></p><p>1 code html đơn giản, chúng ta thêm js trực tiếp vào bằng thẻ <strong><code><code>&lt;script&gt;</code></code></strong><br /> Chúng ta có thể thêm file js , css vào bằng</p><blockquote><p><code><code>&lt;script src=&quot;Link tới file js&quot;&gt;&lt;/script&gt;</code></code><br /> <code><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;Link tới file css&quot;/&gt;</code></code></p></blockquote><p>Hoặc 1 cách khác là đọc nội dung file js/css rồi đưa vào bên trong thẻ <code><code>&lt;script&gt;Nội dung file js&lt;/script&gt;</code>`<code> và </code>`<code>&lt;style&gt;nội dung file style&lt;/style&gt;</code></code> tương ứng<br /> Cái này chúng ta gọi là Injecting JavaScript/Css vào Html<br /> Đây là đoạn code Injecting JavaScript:</p><blockquote><p>pub async fn items() -&gt; HttpResponse {<br /> let mut html_data = read_file(<br /> &quot;./templates/main.html&quot;);<br /> let javascript_data = read_file(<br /> &quot;./javascript/main.js&quot;);<br /> html_data = html_data.replace(&quot;{{JAVASCRIPT}}&quot;,        &amp;javascript_data);<br /> HttpResponse::Ok()<br /> .content_type(&quot;text/html; charset=utf-8&quot;)<br /> .body(html_data)<br /> }</p></blockquote><p>File <strong>main.html</strong></p><pre><code class="language-html">&lt;body&gt;
    &lt;h1&gt;Done Items&lt;/h1&gt;
    &lt;div id=&quot;doneItems&quot;&gt;&lt;/div&gt;
    &lt;h1&gt;To Do Items&lt;/h1&gt;
    &lt;div id=&quot;pendingItems&quot;&gt;&lt;/div&gt;
    &lt;input type=&quot;text&quot; id=&quot;name&quot; placeholder=&quot;create         to do item&quot;&gt;
    &lt;button id=&quot;create-button&quot;
        value=&quot;Send&quot;&gt;Create&lt;/button&gt;
&lt;/body&gt;
&lt;script&gt;
    {{JAVASCRIPT}}
&lt;/script&gt;</code></pre><p>Ta dùng hàm <strong>read_file</strong> để đọc nội dung file <strong>main.html</strong> và <strong>main.js</strong> , sau đó thay thế nội dung của <strong>main.js</strong> vào vị trí {{JAVASCRIPT}} , Làm tương tự với injecting css.<br /> Cũng giống như kĩ thuật injecting js/css ở trên mình injecting html ( đọc nội dung file html này thay vào 1 vị trí trong file html khác) để tạo template dùng chung và các component</p><pre><code class="language-html">. . . 
    &lt;style&gt;
        {{BASE_CSS}}
        {{CSS}}
        HEADER_CSS
    &lt;/style&gt;
    &lt;body&gt;
        &lt;div class=&quot;mainContainer&quot;&gt;
            HEADER_HTML
            &lt;h1&gt;Done Items&lt;/h1&gt;
. . .</code></pre><p>Ở ví dụ trên ta để vị trí HEADER_HTML như là 1 component , mình sẽ đọc nội dung file header.html rồi sau đó replace với HEADER_HTML này.Đây là cách mà các template engine hoạt động, dĩ nhiên với 1 project thực tế thì ta xài template engine luôn cho nó gọn<br /> mình ví dụ 1 template engine nhé :<br /> <a href="https://github.com/Keats/tera">https://github.com/Keats/tera</a><br /> Full list ở đây <a href="https://crates.io/categories/template-engine">https://crates.io/categories/template-engine</a></p><p>Ok , Kĩ thuật injecting đã nắm được chúng ta bắt đầu làm lại cái app todo list của mình với đầy đủ tính năng thêm sửa xóa và có giao diện trên web trông ổn 1 tí với css<br /> Đây là giao diện chúng ta cần làm<br /> <img src="https://rustvietnam.com/wp-content/uploads/2021/09/Screenshot_1.png" alt="" /><br /> Chúng ta cần làm là</p><ol><li>Code html trong templates/main.html, trong templates tạo folder components , trước hết chúng ta cần component header nên chúng ta tạo file header.html và header.css( css dùng riêng cho component header).</li><li>Code Js javascript/main.js</li><li>Code css trong css/main.js và base.css( css dùng chung cho toàn app)</li><li>Cuối cùng File <strong>views/app/items.rs</strong> là nơi chúng ta code gọi tất cả các file ở trên để show ra trình duyệt</li></ol><p>Theo thứ tự 1 <strong>templates/main.html</strong></p><pre><code class="language-html">   &lt;style&gt;
        {{BASE_CSS}}
        {{CSS}}
        HEADER_CSS
    &lt;/style&gt;
    &lt;body&gt;
        &lt;div class=&quot;mainContainer&quot;&gt;
            HEADER_HTML
            &lt;h1&gt;Done Items&lt;/h1&gt;
            &lt;div id=&quot;doneItems&quot;&gt;&lt;/div&gt;
            &lt;h1&gt;To Do Items&lt;/h1&gt;
            &lt;div id=&quot;pendingItems&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;inputContainer&quot;&gt;
                &lt;input type=&quot;text&quot; id=&quot;name&quot; placeholder=&quot;create to do item&quot;&gt;
                &lt;div class=&quot;actionButton&quot; id=&quot;create-button&quot; value=&quot;Send&quot;&gt;Create&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
    &lt;script&gt;
        {{JAVASCRIPT}}
    &lt;/script&gt;</code></pre><p>Trong <strong>templates/components/header.html</strong></p><pre><code class="language-html">&lt;div class=&quot;header&quot;&gt;
    &lt;p&gt;complete tasks: &lt;/p&gt;&lt;p id=&quot;completeNum&quot;&gt;&lt;/p&gt;
    &lt;p&gt;pending tasks: &lt;/p&gt;&lt;p id=&quot;pendingNum&quot;&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre><p>Tạo file <strong>templates/components/header.css</strong>, tạm thời để trống.</p><p>Tiếp theo 2 là tạo <strong>javascript/main.js</strong> chúng tạm thời để file trống<br /> Bước 3 tạo <strong>css/main.css</strong> và <strong>css/base.css</strong><br /> Bước 4 File <strong>views/app/items.rs</strong></p><pre><code class="language-html">use actix_web::HttpResponse;
use super::content_loader::read_file;
use super::content_loader::add_component;
/// Renders the main view that shows all items in the state.
///
/// # Returns
/// * (HttpResponse) with HTML
pub async fn items() -&gt; HttpResponse {
    let mut html_data = read_file(        String::from(&quot;./templates/main.html&quot;));
    let javascript_data: String = read_file(
 String::from(&quot;./javascript/main.js&quot;));
    let css_data: String = read_file(
        String::from(&quot;./css/main.css&quot;));
    let base_css_data: String = read_file(
        String::from(&quot;./css/base.css&quot;));
    html_data = html_data.replace(&quot;{{JAVASCRIPT}}&quot;, &amp;javascript_data);
    html_data = html_data.replace(&quot;{{CSS}}&quot;, &amp;css_data);
    html_data = html_data.replace(&quot;{{BASE_CSS}}&quot;, &amp;base_css_data);
    html_data = add_component(String::from(&quot;header&quot;), html_data);
    HttpResponse::Ok()
        .content_type(&quot;text/html; charset=utf-8&quot;)
        .body(html_data)
}</code></pre><p>Code trên chúng ta dùng injecting <strong>html_data = html_data.replace(“{{JAVASCRIPT}}”, &amp;javascript_data);</strong> để chèn js/css và component header vào main.html sau đó trả kết quả html về trình duyệt <strong>HttpResponse::Ok()<br /> .content_type(“text/html; charset=utf-8”)<br /> .body(html_data)</strong><br /> Ok, vậy chúng ta sẽ có giao diện cơ bản<br /> <img src="https://rustvietnam.com/wp-content/uploads/2021/09/Screenshot_2.png" alt="" /><br /> Để cho dễ chạy mình bỏ qua cái khoản login , giữ file <strong>main.rs</strong> như cũ</p><pre><code class="language-html">use actix_web::{App, HttpServer};
mod state;
mod to_do;
mod views;
mod processes;
mod json_serialization;
#[actix_web::main]
async fn main() -&gt; std::io::Result&lt;()&gt; {
    HttpServer::new(|| {
        let app = App::new().configure(views::views_factory);
        app
    }).bind(&quot;127.0.0.1:8000&quot;)?.run().await
}</code></pre><p>Tiếp tục chúng ta show list các task từ file <strong>state.json</strong> , chúng ta sẽ code ở <strong>javascript/main.js</strong> dùng ajax để load nội dung file <strong>state.json</strong> sau đó chèn html vô view</p><pre><code class="language-html">function apiCall(url, method) {
let xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener(&#039;readystatechange&#039;, function() {
if (this.readyState === this.DONE) {
renderItems(JSON.parse(this.responseText)[&quot;pending_items&quot;], &quot;edit&quot;, &quot;pendingItems&quot;, editItem);
renderItems(JSON.parse(this.responseText)[&quot;done_items&quot;], &quot;delete&quot;, &quot;doneItems&quot;, deleteItem);
document.getElementById(&quot;completeNum&quot;).innerHTML = JSON.parse(this.responseText)[&quot;done_item_count&quot;];
document.getElementById(&quot;pendingNum&quot;).innerHTML = JSON.parse(this.responseText)[&quot;pending_item_count&quot;];
}
});
xhr.open(method, url);
xhr.setRequestHeader(&#039;content-type&#039;, &#039;application/json&#039;);
xhr.setRequestHeader(&#039;user-token&#039;, &#039;token&#039;);
return xhr
}</code></pre><p>Hàm gọi ajax này nó hơi dài vì nó là js thuần túy , nếu mình xài thư viện như jQuery sẽ gọn hơn nhiều<br /> Sau đó là hàm render các item task</p><pre><code class="language-html">function renderItems(items, processType,
    elementId, processFunction) {
let placeholder = &quot;&lt;div&gt;&quot;
let itemsMeta = [];

for (i = 0; i &lt; items.length; i++) {
let title = items[i][&quot;title&quot;];
let placeholderId = processType +
&quot;-&quot; + title.replaceAll(&quot; &quot;, &quot;-&quot;);

placeholder += &#039;&lt;div class=&quot;itemContainer&quot;&gt;&#039; +
&#039;&lt;p&gt;&#039; + title + &#039;&lt;/p&gt;&#039; +
&#039;&lt;div class=&quot;actionButton&quot; &#039; + &#039;id=&quot;&#039; + placeholderId + &#039;&quot;&gt;&#039;
+ processType + &#039;&lt;/div&gt;&#039; + &quot;&lt;/div&gt;&quot;;
itemsMeta.push({&quot;id&quot;: placeholderId, &quot;title&quot;: title});
}
placeholder += &quot;&lt;/div&gt;&quot;
document.getElementById(elementId).innerHTML = placeholder;
for (i = 0; i &lt; itemsMeta.length; i++) {
document.getElementById(
itemsMeta[i][&quot;id&quot;]).addEventListener(
&quot;click&quot;, processFunction);
}
}</code></pre><p>Ta gọi ajax với url : <strong>/item/get</strong> để lấy các items</p><pre><code class="language-html">function getItems() {
let call = apiCall(&quot;/item/get&quot;, &#039;GET&#039;);
call.send()
}
getItems();</code></pre><p>Tương tự chúng ta cũng có các hàm gọi ajax <strong>/item/edit</strong> , <strong>/item/create/</strong> và <strong>/item/delete/</strong></p><pre><code class="language-html">function editItem() {
let title = this.id.replaceAll(&quot;-&quot;, &quot; &quot;).replace(&quot;edit &quot;, &quot;&quot;);
let call = apiCall(&quot;/item/edit&quot;, &quot;PUT&quot;);
let json = {
&quot;title&quot;: title,
&quot;status&quot;: &quot;done&quot;
};
call.send(JSON.stringify(json));
}

document.getElementById(&quot;create-button&quot;).addEventListener(
&quot;click&quot;, createItem);

function createItem() {
let title = document.getElementById(&quot;name&quot;);
let call = apiCall(&quot;/item/create/&quot; + title.value, &quot;POST&quot;);
call.send();
document.getElementById(&quot;name&quot;).value = null;
}
function deleteItem() {
let title = this.id.replaceAll(&quot;-&quot;, &quot; &quot;).replace(&quot;delete &quot;, &quot;&quot;);
let call = apiCall(&quot;/item/delete&quot;, &quot;POST&quot;);
let json = {
&quot;title&quot;: title,
&quot;status&quot;: &quot;done&quot;
};
call.send(JSON.stringify(json));
}</code></pre><p><strong>/item/edit</strong> , <strong>/item/create/</strong> thì đã có nhưng <strong>/item/delete/</strong> thì chưa , trong <strong>src/views/to_do</strong> chúng ta thêm vào <strong>delete.rs</strong></p><pre><code class="language-html">use actix_web::{web, HttpResponse};
use serde_json::value::Value;
use serde_json::Map;
use super::utils::return_state;
use crate::state::read_file;
use crate::to_do::to_do_factory;
use crate::json_serialization::to_do_item::ToDoItem;
use crate::processes::process_input;
pub async fn delete(to_do_item: web::Json&lt;ToDoItem&gt;) -&gt; HttpResponse {
    let state: Map&lt;String, Value&gt; = read_file(String::from(&quot;./state.json&quot;));
    let title: String = to_do_item.title.clone();
    let status: String = to_do_item.status.clone();
    match to_do_factory(&amp;status, title) {
        Err(_item) =&gt; return HttpResponse::BadRequest().json(
            format!(&quot;{} not accepted&quot;, status)),
        Ok(item) =&gt; process_input(item, String::from(&quot;delete&quot;), &amp;state)
    }
    return HttpResponse::Ok().json(return_state())
}</code></pre><p>Trong <strong>src/views/to_do/mod.rs</strong> thêm vào khai báo <strong>mod delete;</strong> và factory</p><blockquote><p>app.route(&amp;base_path.define(String::from(&quot;/delete&quot;)),web::post().to(delete::delete));</p></blockquote><p>Chạy <strong>cargo run</strong> để kiểm tra js vừa thêm vào<br /> <img src="https://rustvietnam.com/wp-content/uploads/2021/09/Screenshot_3.png" alt="" /></p><p>Phần tiếp theo là thêm vào css để làm cho app trông đẹp 1 chút.Css thì khỏi phải giải thích gì nhé các bạn <strong>css/base.js</strong></p><pre><code class="language-html">body {
    background-color: #92a8d1;
    font-family: Arial, Helvetica, sans-serif;
    height: 100vh;
}
@media(max-width: 500px) {
    body {
        padding: 1px;
        display: grid;
        grid-template-columns: 1fr;
    }
}
@media(min-width: 501px) and (max-width: 550px) {
    body {
        padding: 1px;
        display: grid;
        grid-template-columns: 1fr 5fr 1fr;
    }
    .mainContainer {
        grid-column-start: 2;
    }
}
@media(min-width: 551px) and (max-width: 1000px) {
    body {
        padding: 1px;
        display: grid;
        grid-template-columns: 1fr 3fr 1fr;
    }
    .mainContainer {
        grid-column-start: 2;
    }
}
@media(min-width: 1001px) {
    body {
        padding: 1px;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
    }
    .mainContainer {
        grid-column-start: 2;
    }
}</code></pre><p><strong>css/main.css</strong></p><pre><code class="language-html">.itemContainer {
    background: #034f84;
    margin: 0.3rem;
}

.itemContainer:hover {
    background: #034f99;
}

.itemContainer p {
    color: white;
    display: inline-block;
    margin: 0.5rem;
    margin-right: 0.4rem;
    margin-left: 0.4rem;
}

.actionButton {
    display: inline-block;
    float: right;
    background: #f7786b;
    border: none;
    padding: 0.5rem;
    padding-left: 2rem;
    padding-right: 2rem;
    color: white;
}

.actionButton:hover {
    background: #f7686b;
    color: black;
}

.inputContainer {
    background: #034f84;
    margin: 0.3rem;
    margin-top: 2rem;
}

.inputContainer input {
    display: inline-block;
    margin: 0.4rem;
}</code></pre><p><strong>templates/components/header.css</strong></p><pre><code class="language-html">.header {
    background: #034f84;
    margin-bottom: 0.3rem;
}
.header p {
    color: white;
    display: inline-block;
    margin: 0.5rem;
    margin-right: 0.4rem;
    margin-left: 0.4rem;
}</code></pre><p>Kết quả<br /> <img src="https://rustvietnam.com/wp-content/uploads/2021/09/Screenshot_4.png" alt="" /></p><p>OK , Xong!!</p><hr/><div class="powr-comments" id="e67d472b_105"></div><script src="https://www.powr.io/powr.js?platform=html"></script> </div></div></div></section><footer class="footer has-cards"><div class="container"><hr><div class="row align-items-center justify-content-md-between"><div class="col-md-6"><div class="copyright"> © 2021 <a href="" target="_blank">Bản quyền thuộc về RustVietNam</a>.</div></div><div class="col-md-6 text-right"> <a class="text-teal" href="https://rustvietnam.com/privacy-policy">Điều khoản</a></div></div></div></footer><style>.single-content img{
        max-width: 100%;
        height: auto;
    }
    .single-content blockquote{
        padding-left: 20px;
        border-left: 5px solid;
        font-size: 87.5%;
        color: #f3a4b5;
        word-break: break-word;
        font-family: system-ui;
    }</style></body></html>